# Migration `20200804115527`

This migration has been generated by Yuval Hazaz at 8/4/2020, 11:55:27 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "EnumEntityAction_new" AS ENUM ('View', 'Create', 'Update', 'Delete', 'Search');
ALTER TABLE "public"."EntityPermission" ALTER COLUMN "action" DROP DEFAULT,
                        ALTER COLUMN "action" TYPE "EnumEntityAction_new" USING ("action"::text::"EnumEntityAction_new"),
                        ALTER COLUMN "action" SET DEFAULT 'View';
ALTER TYPE "EnumEntityAction" RENAME TO "EnumEntityAction_old";
ALTER TYPE "EnumEntityAction_new" RENAME TO "EnumEntityAction";
DROP TYPE "EnumEntityAction_old"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200803151624..20200804115527
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
   enabled  = true
 }
 generator client {
@@ -94,9 +94,9 @@
   description String?
   @@unique([appId, name])
   @@unique([appId, displayName])
-  EntityPermission EntityPermission[]
+  entityPermissions EntityPermission[]
 }
 model Entity {
   id                String          @default(cuid()) @id
@@ -130,17 +130,17 @@
   entityFields  EntityField[]
   @@unique([entityId, versionNumber])
-  EntityPermission EntityPermission[]
+  entityPermissions EntityPermission[]
 }
 enum EnumEntityAction {
-  view
-  create
-  update
-  delete
-  search
+  View
+  Create
+  Update
+  Delete
+  Search
 }
 model EntityPermission {
   entityVersion   EntityVersion    @relation(fields: [entityVersionId], references: [id])
```


