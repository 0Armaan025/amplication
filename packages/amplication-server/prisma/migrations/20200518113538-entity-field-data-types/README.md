# Migration `20200518113538-entity-field-data-types`

This migration has been generated by Yuval Hazaz at 5/18/2020, 11:35:38 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "EnumDataType_new" AS ENUM ('singleLineText', 'multiLineText', 'email', 'state', 'autoNumber', 'wholeNumber', 'dateTime', 'decimalNumber', 'file', 'image', 'lookup', 'multiSelectOptionSet', 'optionSet', 'twoOptions', 'boolean', 'uniqueId', 'geographicAddress');
ALTER TABLE "public"."EntityField" ALTER COLUMN "dataType" DROP DEFAULT,
                        ALTER COLUMN "dataType" TYPE "EnumDataType_new" USING ("dataType"::text::"EnumDataType_new"),
                        ALTER COLUMN "dataType" SET DEFAULT 'singleLineText';
ALTER TYPE "EnumDataType" RENAME TO "EnumDataType_old";
ALTER TYPE "EnumDataType_new" RENAME TO "EnumDataType";
DROP TYPE "EnumDataType_old"

ALTER TABLE "public"."EntityField" ADD COLUMN "fieldPermanentId" text  NOT NULL ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200517202516-rename-app-entities-field..20200518113538-entity-field-data-types
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
   enabled  = true
 }
 generator client {
@@ -94,9 +94,9 @@
   isPersistent      Boolean
   // TBC
   allowFeedback     Boolean
   primaryField      String?
-  EntityVersion     EntityVersion[]
+  EntityVersions    EntityVersion[]
   @@unique([appId, name])
   @@unique([appId, pluralDisplayName])
   @@unique([appId, displayName])
@@ -115,45 +115,42 @@
   @@unique([entityId, versionNumber])
 }
 model EntityField {
-  id              String        @default(cuid()) @id
-  createdAt       DateTime      @default(now())
-  updatedAt       DateTime      @updatedAt
-  entityVersion   EntityVersion @relation(fields: [entityVersionId], references: [id])
-  entityVersionId String
-  name            String
-  displayName     String
-  dataType        EnumDataType
-  properties      String
+  id                String        @default(cuid()) @id
+  createdAt         DateTime      @default(now())
+  updatedAt         DateTime      @updatedAt
+  entityVersion     EntityVersion @relation(fields: [entityVersionId], references: [id])
+  entityVersionId   String
+  fieldPermanentId  String        @default(cuid())
+  name              String
+  displayName       String
+  dataType          EnumDataType
+  properties        String
+  required          Boolean
   // TBD
-  required        Boolean
-  // TBD
-  searchable      Boolean
-  // TBD
-  description     String
+  searchable        Boolean
+  description       String
   @@unique([entityVersionId, name])
   @@unique([entityVersionId, displayName])
 }
 enum EnumDataType {
-  Text
-  AutoNumber
-  WholeNumber
-  TimeZone
-  Language
-  DateAndTime
-  Currancy
-  DecimalNumber
-  File
-  Image
-  Lookup
-  CustomEntity
-  OptionSet
-  Boolean
-  Color
-  Guid
-  Time
-  CalculatedField
-  RollupField
+  singleLineText
+  multiLineText
+  email
+  state
+  autoNumber
+  wholeNumber
+  dateTime
+  decimalNumber
+  file
+  image
+  lookup
+  multiSelectOptionSet
+  optionSet
+  twoOptions
+  boolean
+  uniqueId
+  geographicAddress
 }
```


