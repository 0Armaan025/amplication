# Migration `20200727171644-rename-block-name-to-block-display-name`

This migration has been generated by Yuval Hazaz at 7/27/2020, 5:16:44 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."Block.appId_name"

ALTER TABLE "public"."Block" DROP COLUMN "name",
ADD COLUMN "displayName" text  NOT NULL ,
ALTER COLUMN "blockType" DROP DEFAULT;

CREATE UNIQUE INDEX "Block.appId_displayName" ON "public"."Block"("appId","displayName")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200611145219-block-type-enum-to-upper-case..20200727171644-rename-block-name-to-block-display-name
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
   enabled  = true
 }
 generator client {
@@ -165,13 +165,13 @@
   appId         String
   parentBlock   Block?         @relation(fields: [parentBlockId], references: [id])
   parentBlockId String?
   blockType     EnumBlockType
-  name          String
+  displayName   String
   description   String?
   blockVersions BlockVersion[]
-  @@unique([appId, name])
+  @@unique([appId, displayName])
   blocks Block[] @relation("BlockToBlock")
 }
 enum EnumBlockType {
```


