datasource sqlite {
  provider = "sqlite"
  url = "***"
  enabled  = false
}

datasource db {
  provider = "postgresql"
  url = "***"
  enabled  = true
}

generator client {
  provider = "prisma-client-js"
}

generator typegraphql {
  provider = "node_modules/typegraphql-prisma-nestjs/generator.js"
  output   = "./dal"
}

model Account {
  id    String   @default(cuid()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  email String @unique
  firstName String
  lastName String
  password  String
  users  User[]
}




model Organization {
  id    String   @default(cuid()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  name  String
  defaultTimeZone String
  address String
  projects  Project[]
  users User[]
}



model User {
  id    String   @default(cuid()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  account Account
  organization Organization
  userRoles UserRole[]
}


enum Role {
  ADMIN
  USER
}

model UserRole {
  id    String   @default(cuid()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  user  User
  role Role
}



model Project {
  id    String   @default(cuid()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  organization Organization
  name  String 
  entity  Entity[] 
  //@@index([organization])
}

model Entity {
  id    String   @default(cuid()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  projects  Project
  name  String
  displayName String
  pluralDisplayName String
  description String
  isPersistent  Boolean
  allowFeedback Boolean // TBC
  primaryField  String
}




