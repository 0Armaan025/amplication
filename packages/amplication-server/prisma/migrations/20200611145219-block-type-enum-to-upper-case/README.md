# Migration `20200611145219-block-type-enum-to-upper-case`

This migration has been generated by Yuval Hazaz at 6/11/2020, 2:52:19 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "EnumBlockType_new" AS ENUM ('AppSettings', 'Flow', 'ConnectorRestApi', 'ConnectorRestApiCall', 'ConnectorSoapApi', 'ConnectorFile', 'EntityApi', 'EntityApiEndpoint', 'FlowApi', 'Layout', 'CanvasPage', 'EntityPage', 'Document');
ALTER TABLE "public"."Block" ALTER COLUMN "blockType" DROP DEFAULT,
                        ALTER COLUMN "blockType" TYPE "EnumBlockType_new" USING ("blockType"::text::"EnumBlockType_new"),
                        ALTER COLUMN "blockType" SET DEFAULT 'AppSettings';
ALTER TYPE "EnumBlockType" RENAME TO "EnumBlockType_old";
ALTER TYPE "EnumBlockType_new" RENAME TO "EnumBlockType";
DROP TYPE "EnumBlockType_old"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200609094642-parent-block..20200611145219-block-type-enum-to-upper-case
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
   enabled  = true
 }
 generator client {
@@ -170,25 +170,25 @@
   description   String?
   blockVersions BlockVersion[]
   @@unique([appId, name])
-  Block Block[] @relation("BlockToBlock")
+  blocks Block[] @relation("BlockToBlock")
 }
 enum EnumBlockType {
-  appSettings
-  flow
+  AppSettings
+  Flow
   ConnectorRestApi
   ConnectorRestApiCall
   ConnectorSoapApi
   ConnectorFile
-  entityApi
-  entityApiEndpoint
-  flowApi
-  layout
-  canvasPage
-  wizardPage
-  document
+  EntityApi
+  EntityApiEndpoint
+  FlowApi
+  Layout
+  CanvasPage
+  EntityPage
+  Document
 }
 model BlockVersion {
   id               String   @default(cuid()) @id
```


