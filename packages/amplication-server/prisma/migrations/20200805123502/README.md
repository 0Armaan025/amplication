# Migration `20200805123502`

This migration has been generated by Yuval Hazaz at 8/5/2020, 12:35:02 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."EntityVersion" ADD COLUMN "commitId" text  NOT NULL ;

ALTER TABLE "public"."EntityVersion" ADD FOREIGN KEY ("commitId")REFERENCES "public"."Commit"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200805123040..20200805123502
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
   enabled  = true
 }
 generator client {
@@ -108,8 +108,9 @@
   user      User     @relation(fields: [userId], references: [id])
   userId    String
   message   String
+  entityVersions EntityVersion[]
 }
 model Entity {
   id                String          @default(cuid()) @id
@@ -140,8 +141,10 @@
   entityId      String
   versionNumber Int
   label         String
   entityFields  EntityField[]
+  commit        Commit        @relation(fields: [commitId], references: [id])
+  commitId      String
   @@unique([entityId, versionNumber])
   entityPermissions EntityPermission[]
```


