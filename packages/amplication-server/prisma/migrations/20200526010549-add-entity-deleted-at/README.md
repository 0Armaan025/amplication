# Migration `20200526010549-add-entity-deleted-at`

This migration has been generated by Iddan Aaronsohn at 5/26/2020, 1:05:49 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Entity" ADD COLUMN "deletedAt" timestamp(3)   ;

ALTER TABLE "public"."EntityField" ALTER COLUMN "dataType" DROP DEFAULT;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200518113538-entity-field-data-types..20200526010549-add-entity-deleted-at
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
   enabled  = true
 }
 generator client {
@@ -84,8 +84,9 @@
 model Entity {
   id                String          @default(cuid()) @id
   createdAt         DateTime        @default(now())
   updatedAt         DateTime        @updatedAt
+  deletedAt         DateTime?
   app               App             @relation(fields: [appId], references: [id])
   appId             String
   name              String
   displayName       String
@@ -115,22 +116,22 @@
   @@unique([entityId, versionNumber])
 }
 model EntityField {
-  id                String        @default(cuid()) @id
-  createdAt         DateTime      @default(now())
-  updatedAt         DateTime      @updatedAt
-  entityVersion     EntityVersion @relation(fields: [entityVersionId], references: [id])
-  entityVersionId   String
-  fieldPermanentId  String        @default(cuid())
-  name              String
-  displayName       String
-  dataType          EnumDataType
-  properties        String
-  required          Boolean
+  id               String        @default(cuid()) @id
+  createdAt        DateTime      @default(now())
+  updatedAt        DateTime      @updatedAt
+  entityVersion    EntityVersion @relation(fields: [entityVersionId], references: [id])
+  entityVersionId  String
+  fieldPermanentId String        @default(cuid())
+  name             String
+  displayName      String
+  dataType         EnumDataType
+  properties       String
+  required         Boolean
   // TBD
-  searchable        Boolean
-  description       String
+  searchable       Boolean
+  description      String
   @@unique([entityVersionId, name])
   @@unique([entityVersionId, displayName])
 }
```


