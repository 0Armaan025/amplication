# Migration `20200312084142`

This migration has been generated by Alon Ram at 3/12/2020, 8:41:42 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "EnumDataType" AS ENUM ('Text', 'AutoNumber', 'WholeNumber', 'TimeZone', 'Language', 'DateAndTime', 'Currancy', 'DecimalNumber', 'File', 'Image', 'Lookup', 'CustomEntity', 'OptionSet', 'Boolean', 'Color', 'Guid', 'Time', 'CalculatedField', 'RollupField');

CREATE TABLE "public"."EntityVersion" (
    "Label" text  NOT NULL DEFAULT '',
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "entity" text  NOT NULL ,
    "id" text  NOT NULL ,
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "versionNumber" integer  NOT NULL DEFAULT 0,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."EntityField" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "dataType" "EnumDataType" NOT NULL DEFAULT 'Text',
    "dataTypeProperties" text  NOT NULL DEFAULT '',
    "description" text  NOT NULL DEFAULT '',
    "displayName" text  NOT NULL DEFAULT '',
    "entityVersion" text  NOT NULL ,
    "id" text  NOT NULL ,
    "name" text  NOT NULL DEFAULT '',
    "properties" text  NOT NULL DEFAULT '',
    "required" boolean  NOT NULL DEFAULT false,
    "searchable" boolean  NOT NULL DEFAULT false,
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."EntityVersion" ADD FOREIGN KEY ("entity")REFERENCES "public"."Entity"("id") ON DELETE RESTRICT  ON UPDATE CASCADE

ALTER TABLE "public"."EntityField" ADD FOREIGN KEY ("entityVersion")REFERENCES "public"."EntityVersion"("id") ON DELETE RESTRICT  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200312083617..20200312084142
--- datamodel.dml
+++ datamodel.dml
@@ -1,13 +1,13 @@
 datasource sqlite {
   provider = "sqlite"
-  url = "***"
+  url      = "file:./dev.db"
   enabled  = false
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
   enabled  = true
 }
 generator client {
@@ -95,6 +95,52 @@
   primaryField  String
 }
+model EntityVersion {
+  id    String   @default(cuid()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  entity Entity
+  versionNumber Int 
+  Label String
+}
+
+
+model EntityField {
+  id    String   @default(cuid()) @id
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  entityVersion EntityVersion
+  name  String
+  displayName String
+  dataType  EnumDataType
+  dataTypeProperties  String // JSON representation of the properties that relates based on selected type of field
+  properties  String
+  required  Boolean // TBD
+  searchable  Boolean // TBD
+  description String // TBD
+}
+
+enum EnumDataType {
+  Text
+  AutoNumber
+  WholeNumber
+  TimeZone
+  Language
+  DateAndTime
+  Currancy
+  DecimalNumber
+  File
+  Image
+  Lookup
+  CustomEntity
+  OptionSet
+  Boolean
+  Color
+  Guid
+  Time
+  CalculatedField
+  RollupField
+}
```


