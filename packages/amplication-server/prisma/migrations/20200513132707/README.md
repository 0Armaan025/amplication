# Migration `20200513132707`

This migration has been generated by Yuval Hazaz at 5/13/2020, 1:27:07 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."Entity.app_displayName"

DROP INDEX "public"."Entity.app_name"

DROP INDEX "public"."Entity.app_pluralDisplayName"

CREATE UNIQUE INDEX "App.organization_name" ON "public"."App"("organization","name")

CREATE UNIQUE INDEX "Entity.app_name" ON "public"."Entity"("app","name")

CREATE UNIQUE INDEX "Entity.app_pluralDisplayName" ON "public"."Entity"("app","pluralDisplayName")

CREATE UNIQUE INDEX "Entity.app_displayName" ON "public"."Entity"("app","displayName")

CREATE UNIQUE INDEX "EntityField.entityVersion_name" ON "public"."EntityField"("entityVersion","name")

CREATE UNIQUE INDEX "EntityField.entityVersion_displayName" ON "public"."EntityField"("entityVersion","displayName")

CREATE UNIQUE INDEX "EntityVersion.entity_versionNumber" ON "public"."EntityVersion"("entity","versionNumber")

CREATE UNIQUE INDEX "Organization.name" ON "public"."Organization"("name")

CREATE UNIQUE INDEX "User.account_organization" ON "public"."User"("account","organization")

CREATE UNIQUE INDEX "UserRole.user_role" ON "public"."UserRole"("user","role")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200513132607..20200513132707
--- datamodel.dml
+++ datamodel.dml
@@ -1,13 +1,13 @@
 datasource sqlite {
   provider = "sqlite"
-  url = "***"
+  url      = "file:./dev.db"
   enabled  = false
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
   enabled  = true
 }
 generator client {
@@ -37,9 +37,9 @@
 model Organization {
   id    String   @default(cuid()) @id
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
-  name  String //@unique
+  name  String @unique
   defaultTimeZone String
   address String
   apps  App[]
   users User[]
@@ -54,9 +54,9 @@
   account Account
   organization Organization
   userRoles UserRole[]
-   //@@unique([account, organization])
+   @@unique([account, organization])
 }
 // enum Role {
@@ -73,9 +73,9 @@
   updatedAt DateTime @updatedAt
   user  User
   role String
-   //@@unique([user, role])
+   @@unique([user, role])
 }
 model App {
@@ -86,9 +86,9 @@
   name  String 
   description String
   entity  Entity[] 
-  //@@unique([organization, name])
+  @@unique([organization, name])
 }
 model Entity {
   id    String   @default(cuid()) @id
@@ -116,9 +116,9 @@
   entity Entity
   versionNumber Int 
   Label String
-  //@@unique([entity, versionNumber])
+  @@unique([entity, versionNumber])
 }
@@ -135,10 +135,10 @@
   required  Boolean // TBD
   searchable  Boolean // TBD
   description String // TBD
-  //@@unique([entityVersion, name])
-  //@@unique([entityVersion, displayName])
+  @@unique([entityVersion, name])
+  @@unique([entityVersion, displayName])
 }
 enum EnumDataType {
   Text
```


