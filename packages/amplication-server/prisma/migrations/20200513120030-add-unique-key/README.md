# Migration `20200513120030-add-unique-key`

This migration has been generated by Yuval Hazaz at 5/13/2020, 12:00:30 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE UNIQUE INDEX "Entity.app_name" ON "public"."Entity"("app","name")

CREATE UNIQUE INDEX "Entity.app_pluralDisplayName" ON "public"."Entity"("app","pluralDisplayName")

CREATE UNIQUE INDEX "Entity.app_displayName" ON "public"."Entity"("app","displayName")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200513112646-make-entity-field-primary-field-optional..20200513120030-add-unique-key
--- datamodel.dml
+++ datamodel.dml
@@ -1,13 +1,13 @@
 datasource sqlite {
   provider = "sqlite"
-  url = "***"
+  url      = "file:./dev.db"
   enabled  = false
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
   enabled  = true
 }
 generator client {
@@ -95,8 +95,12 @@
   description String?
   isPersistent  Boolean
   allowFeedback Boolean // TBC
   primaryField  String?
+
+  @@unique([app, name])
+  @@unique([app, pluralDisplayName])
+  @@unique([app, displayName])
 }
 model EntityVersion {
```


